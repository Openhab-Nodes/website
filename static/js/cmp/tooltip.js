class t{constructor(t,e,{position:i="top",className:s="popover"},o=document){this.trigger=t,this.position=i,this.className=s,this.orderedPositions=["top","right","bottom","left"],this.popover=e,this.handleWindowEvent=(()=>{this.isVisible&&this.reposition()}),this.handleDocumentEvent=(t=>{this.isVisible&&t.target!==this.trigger&&t.target!==this.popover&&this.destroy()})}get isVisible(){return this.popover.classList.contains(this.className)}show(){this.isVisible||(document.addEventListener("click",this.handleDocumentEvent),window.addEventListener("scroll",this.handleWindowEvent),window.addEventListener("resize",this.handleWindowEvent),this.reposition())}reposition(){const{top:t,left:e}=this.trigger.getBoundingClientRect(),{offsetHeight:i,offsetWidth:s}=this.trigger,{offsetHeight:o,offsetWidth:n}=this.popover,r=this.orderedPositions.indexOf(this.position),h={top:{name:"top",top:t-o,left:e-(n-s)/2},right:{name:"right",top:t-(o-i)/2,left:e+s},bottom:{name:"bottom",top:t+i,left:e-(n-s)/2},left:{name:"left",top:t-(o-i)/2,left:e-n}},l=this.orderedPositions.slice(r).concat(this.orderedPositions.slice(0,r)).map(t=>h[t]).find(t=>(this.popover.style.top=`${t.top}px`,this.popover.style.left=`${t.left}px`,function(t){const e=t.getBoundingClientRect(),i=document.documentElement;return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||i.clientHeight)&&e.right<=(window.innerWidth||i.clientWidth)}(this.popover)));this.orderedPositions.forEach(t=>{this.popover.classList.remove(`${this.className}--${t}`)}),l?this.popover.classList.add(`${this.className}--${l.name}`):(this.popover.style.top=h.bottom.top,this.popover.style.left=h.bottom.left,this.popover.classList.add(`${this.className}--bottom`)),this.popover.classList.add(this.className)}destroy(){this.orderedPositions.forEach(t=>{this.popover.classList.remove(`${this.className}--${t}`)}),this.popover.classList.remove(`${this.className}`),document.removeEventListener("click",this.handleDocumentEvent),window.removeEventListener("scroll",this.handleWindowEvent),window.removeEventListener("resize",this.handleWindowEvent)}toggle(){this.isVisible?this.destroy():this.show()}}window.customElements.define("ui-tooltip",class extends HTMLElement{constructor(){super(),this.clickCb=(t=>this.click(t)),this.attachShadow({mode:"open"}).innerHTML="<link rel='stylesheet' href='/css/main.min.css'><div style='position:fixed;visibility:hidden;z-index:100' id='main'><slot></slot></div><slot name='button'></slot>"}click(t){t&&(t.preventDefault(),t.stopPropagation()),this.popover.toggle()}connectedCallback(){window.requestAnimationFrame(()=>this.connectedCallbackDelayed())}connectedCallbackDelayed(){const e=this.shadowRoot.querySelector("#main");this.hasAttribute("maxwidth")&&(e.style.maxWidth="500px");let i=this.hasAttribute("target")?document.getElementById(this.getAttribute("target")):null;this.popover&&this.popover.destroy(),this.popover=new t(i||this,e,{position:"bottom"}),i||(i=this.shadowRoot.querySelector('slot[name="button"]')),i&&(i.removeEventListener("click",this.clickCb),i.addEventListener("click",this.clickCb))}disconnectedCallback(){this.popover&&this.popover.destroy(),delete this.popover;const t=document.getElementById(this.getAttribute("target"));t&&t.removeEventListener("click",this.clickCb)}});
//# sourceMappingURL=tooltip.js.map
