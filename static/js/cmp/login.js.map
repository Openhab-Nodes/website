{"version":3,"file":"login.js","sources":["../../../assets/js/login/index.js"],"sourcesContent":["window.customElements.define('ui-login', class extends HTMLElement {\n    constructor() {\n        super();\n        this.prepareLoginCb = () => this.prepareLogin();\n    }\n    prepareLogin() {\n        let lang = document.getElementById(\"signed-in\").dataset.lang;\n        if (lang == \"en\") lang = \"\"; else lang = \"/\" + lang;\n    \n        let successURL = lang + '/dashboard';\n        let redirect = new URL(window.location).searchParams.get(\"redirect\");\n        if (redirect)\n            successURL = window.location.origin + decodeURIComponent(redirect);\n    \n\n        if (!window.firebaseui || !window.firebase) {\n            document.getElementById('firebaseui-not-online').style.display=\"block\";\n            return;\n        } else {\n            document.getElementById('firebaseui-not-online').style.display=\"none\";\n        }\n\n        var uiConfig = {\n            signInSuccessUrl: successURL,\n            signInOptions: [\n                firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n                //   firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n                //   firebase.auth.TwitterAuthProvider.PROVIDER_ID,\n                firebase.auth.GithubAuthProvider.PROVIDER_ID,\n                firebase.auth.EmailAuthProvider.PROVIDER_ID,\n                //   firebase.auth.PhoneAuthProvider.PROVIDER_ID,\n                //   firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID\n            ],\n            credentialHelper:firebaseui.auth.CredentialHelper.GOOGLE_YOLO,\n            signInFlow:\"popup\",\n            tosUrl: lang + '/terms',\n            privacyPolicyUrl: lang + '/privacy'\n        };\n    \n        // Initialize the FirebaseUI Widget using Firebase.\n        var ui = new firebaseui.auth.AuthUI(firebase.auth());\n        // The start method will wait until the DOM is loaded.\n        ui.start('#firebaseui-auth-container', uiConfig);\n    }\n    connectedCallback() {\n        document.addEventListener(\"MainContentChanged\", this.prepareLoginCb);\n    }\n    disconnectedCallback() {\n        document.removeEventListener(\"MainContentChanged\", this.prepareLoginCb);\n    }\n});"],"names":[],"mappings":"AAAA,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,UAAU,EAAE,cAAc,WAAW,CAAC;IAC/D,WAAW,GAAG;QACV,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,cAAc,GAAG,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;KACnD;IACD,YAAY,GAAG;QACX,IAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC;QAC7D,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,GAAG,EAAE,CAAC,MAAM,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;;QAEpD,IAAI,UAAU,GAAG,IAAI,GAAG,YAAY,CAAC;QACrC,IAAI,QAAQ,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACrE,IAAI,QAAQ;YACR,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,kBAAkB,CAAC,QAAQ,CAAC,CAAC;;;QAGvE,IAAI,CAAC,MAAM,CAAC,UAAU,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;YACxC,QAAQ,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;YACvE,OAAO;SACV,MAAM;YACH,QAAQ,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;SACzE;;QAED,IAAI,QAAQ,GAAG;YACX,gBAAgB,EAAE,UAAU;YAC5B,aAAa,EAAE;gBACX,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW;;;gBAG5C,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW;gBAC5C,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,WAAW;;;aAG9C;YACD,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW;YAC7D,UAAU,CAAC,OAAO;YAClB,MAAM,EAAE,IAAI,GAAG,QAAQ;YACvB,gBAAgB,EAAE,IAAI,GAAG,UAAU;SACtC,CAAC;;;QAGF,IAAI,EAAE,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;;QAErD,EAAE,CAAC,KAAK,CAAC,4BAA4B,EAAE,QAAQ,CAAC,CAAC;KACpD;IACD,iBAAiB,GAAG;QAChB,QAAQ,CAAC,gBAAgB,CAAC,oBAAoB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;KACxE;IACD,oBAAoB,GAAG;QACnB,QAAQ,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;KAC3E;CACJ,CAAC"}