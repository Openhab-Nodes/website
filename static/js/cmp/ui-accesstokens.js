function t(){}function e(t,e,n,c,g){t.__svelte_meta={loc:{file:e,line:n,column:c,char:g}}}function n(t){return t()}function c(){return Object.create(null)}function g(t){t.forEach(n)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function I(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function a(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function r(){return u(" ")}function d(t,e,n,c){return t.addEventListener(e,n,c),()=>t.removeEventListener(e,n,c)}function C(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}let b;function m(t){b=t}function X(t){(function(){if(!b)throw new Error("Function called outside component initialization");return b})().$$.on_destroy.push(t)}const G=[],h=[],Z=[],f=[],x=Promise.resolve();let y=!1;function B(t){Z.push(t)}function p(){const t=new Set;do{for(;G.length;){const t=G.shift();m(t),F(t.$$)}for(;h.length;)h.pop()();for(let e=0;e<Z.length;e+=1){const n=Z[e];t.has(n)||(n(),t.add(n))}Z.length=0}while(G.length);for(;f.length;)f.pop()();y=!1}function F(t){t.fragment&&(t.update(t.dirty),g(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(B))}const V=new Set;const W="undefined"!=typeof window?window:global;function N(t,e){t.$$.dirty||(G.push(t),y||(y=!0,x.then(p)),t.$$.dirty=c()),t.$$.dirty[e]=!0}function Y(e,o,I,l,i,a){const u=b;m(e);const r=o.props||{},d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:i,bound:c(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:c(),dirty:null};let C=!1;var A,X,G;d.ctx=I?I(e,r,(t,n)=>{d.ctx&&i(d.ctx[t],d.ctx[t]=n)&&(d.bound[t]&&d.bound[t](n),C&&N(e,t))}):r,d.update(),C=!0,g(d.before_update),d.fragment=l(d.ctx),o.target&&(o.hydrate?d.fragment.l((G=o.target,Array.from(G.childNodes))):d.fragment.c(),o.intro&&((A=e.$$.fragment)&&A.i&&(V.delete(A),A.i(X))),function(t,e,c){const{fragment:o,on_mount:I,on_destroy:l,after_update:i}=t.$$;o.m(e,c),B(()=>{const e=I.map(n).filter(s);l?l.push(...e):g(e),t.$$.on_mount=[]}),i.forEach(B)}(e,o.target,o.anchor),p()),m(u)}class v{$destroy(){var e,n;n=1,(e=this).$$.fragment&&(g(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}class k extends v{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=(()=>{console.warn("Component was already destroyed")})}}const{Object:Q}=W,R="assets/js/ui-accesstokens/cmp.svelte";function D(t,e,n){const c=Q.create(t);return c.token=e[n],c}function U(t){var n;return{c:function(){(n=a("p")).textContent="No Access Tokens registered!",e(n,R,121,2,3071)},m:function(t,e){l(t,n,e)},d:function(t){t&&i(n)}}}function L(t){var n,c,g,s,o,b,m,X,G,h,Z,f,x,y,B,p,F,V,W,N,Y,v,k,Q=t.token[1].client_name+"",D=t.token[1].client_id+"",U=t.token[1].scopes.join(", ")+"",L=new t.Date(parseInt(t.token[1].issued_at)).toLocaleString()+"";function w(...e){return t.click_handler(t,...e)}return{c:function(){var t,I;n=a("div"),c=a("div"),g=a("div"),s=a("h4"),o=u(Q),b=r(),m=a("p"),X=u("Client: "),G=u(D),h=r(),Z=a("br"),f=u("\n          Scopes: "),x=u(U),y=r(),B=a("br"),p=u("\n          Issued at: "),F=u(L),V=r(),W=a("div"),(N=a("p")).textContent="It takes up to 60 minutes for a revocation to take affect.",Y=r(),(v=a("button")).textContent="Revoke",e(s,R,99,8,2461),e(Z,R,102,10,2554),e(B,R,104,10,2618),e(m,R,100,8,2501),C(g,"class","svelte-etg4yh"),e(g,R,98,6,2447),C(N,"class","small"),e(N,R,109,8,2787),C(v,"class","btn btn-danger"),e(v,R,112,8,2895),C(W,"class","mr-3 svelte-etg4yh"),t="max-width",I="400px",W.style.setProperty(t,I),e(W,R,108,6,2736),C(c,"class","card-body svelte-etg4yh"),e(c,R,97,4,2417),C(n,"class","card svelte-etg4yh"),e(n,R,96,2,2394),k=d(v,"click",w)},m:function(t,e){l(t,n,e),I(n,c),I(c,g),I(g,s),I(s,o),I(g,b),I(g,m),I(m,X),I(m,G),I(m,h),I(m,Z),I(m,f),I(m,x),I(m,y),I(m,B),I(m,p),I(m,F),I(c,V),I(c,W),I(W,N),I(W,Y),I(W,v)},p:function(e,n){t=n,e.access_tokens&&Q!==(Q=t.token[1].client_name+"")&&A(o,Q),e.access_tokens&&D!==(D=t.token[1].client_id+"")&&A(G,D),e.access_tokens&&U!==(U=t.token[1].scopes.join(", ")+"")&&A(x,U),e.access_tokens&&L!==(L=new t.Date(parseInt(t.token[1].issued_at)).toLocaleString()+"")&&A(F,L)},d:function(t){t&&i(n),k()}}}function w(t){var n,c,g;return{c:function(){n=a("div"),(c=a("button")).textContent="Add Demo Access Token",C(c,"class","btn btn-primary"),e(c,R,126,4,3169),C(n,"class","mt-4 svelte-etg4yh"),e(n,R,125,2,3146),g=d(c,"click",t.add_demo)},m:function(t,e){l(t,n,e),I(n,c)},d:function(t){t&&i(n),g()}}}function z(t){var n,c;return{c:function(){n=a("p"),c=u(t.error_message),e(n,R,133,2,3302)},m:function(t,e){l(t,n,e),I(n,c)},p:function(t,e){t.error_message&&A(c,e.error_message)},d:function(t){t&&i(n)}}}function J(e){for(var n,c,g,s=e.Object.entries(e.access_tokens),o=[],I=0;I<s.length;I+=1)o[I]=L(D(e,s,I));var a=null;s.length||(a=U()).c();var d=e.user&&e.user.is_admin&&w(e),C=e.error_message&&z(e);return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=r(),d&&d.c(),c=r(),C&&C.c(),g=u("")},l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(t,e){for(var s=0;s<o.length;s+=1)o[s].m(t,e);a&&a.m(t,e),l(t,n,e),d&&d.m(t,e),l(t,c,e),C&&C.m(t,e),l(t,g,e)},p:function(t,e){if(t.Date||t.Object||t.access_tokens){s=e.Object.entries(e.access_tokens);for(var I=0;I<s.length;I+=1){const c=D(e,s,I);o[I]?o[I].p(t,c):(o[I]=L(c),o[I].c(),o[I].m(n.parentNode,n))}for(;I<o.length;I+=1)o[I].d(1);o.length=s.length}s.length?a&&(a.d(1),a=null):a||((a=U()).c(),a.m(n.parentNode,n)),e.user&&e.user.is_admin?d||((d=w(e)).c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null),e.error_message?C?C.p(t,e):((C=z(e)).c(),C.m(g.parentNode,g)):C&&(C.d(1),C=null)},i:t,o:t,d:function(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t),a&&a.d(t),t&&i(n),d&&d.d(t),t&&i(c),C&&C.d(t),t&&i(g)}}}function j(t,e,n){let c=null,g={},s=null,o={installations:{}},I=null,l=()=>{},i=null;async function a(){return userdata.fetch_collection("access_tokens").then(()=>{const t=g=userdata.access_tokens;return n("access_tokens",g),t}).catch(t=>{n("error_message",c=t.message),console.warn("Writing failed",t)})}function u(t,e,g){t.target.disabled=!0,userdata.remove_from_collection("access_tokens",e).then(()=>{n("error_message",c=null),t.target.disabled=!1}).then(()=>a()).catch(e=>{t.target.disabled=!1,n("error_message",c=e.message),console.warn("Writing failed",e)})}return X(()=>l()),async function(){const t=await import("../../../../../../../../js/cmp/userdata.js");l=t.UserAwareComponent(t=>{const e=s=t;return n("user",s),e},t=>o=Object.assign({installations:{}},t),t=>I=t),i=t.userdata}(),{error_message:c,access_tokens:g,user:s,revoke:u,add_demo:function(t){if(!userdata||!userdata.user)return;t.target.disabled=!0;const e=i.db().collection("access_tokens").doc(userdata.user.uid+"_dummy");e.delete().catch(t=>{}).then(()=>e.set({uid:userdata.user.uid,token:"abcdefghi",client_name:"CLI",client_id:"ohx",scopes:["cloud_connector","addon_registry"],issued_at:Date.now()})).then(()=>{t.target.disabled=!1,a()}).catch(e=>{t.target.disabled=!1,n("error_message",c=e.message),console.warn("Writing failed",e)})},Object,Date,click_handler:function({token:t},e){return u(e,t[0],t[1])}}}class S extends k{constructor(t){var e;super(t),document.getElementById("svelte-etg4yh-style")||((e=a("style")).id="svelte-etg4yh-style",e.textContent=".card.svelte-etg4yh:hover{box-shadow:0 1px 3px 1px rgba(60, 64, 67, 0.2),\n      0 2px 8px 4px rgba(60, 64, 67, 0.1)}.card-body.svelte-etg4yh{display:flex}.card-body.svelte-etg4yh>div.svelte-etg4yh:first-child{flex:1}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY21wLnN2ZWx0ZSIsInNvdXJjZXMiOlsiY21wLnN2ZWx0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyI8c2NyaXB0PlxuICBsZXQgZXJyb3JfbWVzc2FnZSA9IG51bGw7XG4gIGxldCBhY2Nlc3NfdG9rZW5zID0ge307XG5cbiAgLy8vIFVzZXIgQXdhcmUgQ29tcG9uZW50XG4gIGltcG9ydCB7IG9uRGVzdHJveSB9IGZyb20gXCJzdmVsdGVcIjtcbiAgbGV0IHVzZXIgPSBudWxsO1xuICBsZXQgZGF0YSA9IHsgaW5zdGFsbGF0aW9uczoge30gfTtcbiAgbGV0IGFjdGlvbnF1ZXVlID0gbnVsbDtcbiAgbGV0IG9uRGVzdHJveVByb3h5ID0gKCkgPT4ge307XG4gIGxldCB1c2VyZGIgPSBudWxsO1xuICBvbkRlc3Ryb3koKCkgPT4gb25EZXN0cm95UHJveHkoKSk7XG5cbiAgYXN5bmMgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgY29uc3QgbW9kdWxlID0gYXdhaXQgaW1wb3J0KFwiL2pzL2NtcC91c2VyZGF0YS5qc1wiKTtcbiAgICBvbkRlc3Ryb3lQcm94eSA9IG1vZHVsZS5Vc2VyQXdhcmVDb21wb25lbnQoXG4gICAgICB1c2VyXyA9PiAodXNlciA9IHVzZXJfKSxcbiAgICAgIGRhdGFfID0+IChkYXRhID0gT2JqZWN0LmFzc2lnbih7IGluc3RhbGxhdGlvbnM6IHt9IH0sIGRhdGFfKSksXG4gICAgICBhcV8gPT4gKGFjdGlvbnF1ZXVlID0gYXFfKVxuICAgICk7XG4gICAgdXNlcmRiID0gbW9kdWxlLnVzZXJkYXRhO1xuICB9XG4gIHN0YXJ0KCk7XG4gIC8vLyBFbmQgLS0gVXNlciBBd2FyZSBDb21wb25lbnRcblxuICBhc3luYyBmdW5jdGlvbiBmZXRjaF90b2tlbnMoKSB7XG4gICAgcmV0dXJuIHVzZXJkYXRhXG4gICAgICAuZmV0Y2hfY29sbGVjdGlvbihcImFjY2Vzc190b2tlbnNcIilcbiAgICAgIC50aGVuKCgpID0+IChhY2Nlc3NfdG9rZW5zID0gdXNlcmRhdGEuYWNjZXNzX3Rva2VucykpXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgZXJyb3JfbWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICBjb25zb2xlLndhcm4oXCJXcml0aW5nIGZhaWxlZFwiLCBlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXZva2UoZSwgdG9rZW5faWQsIHRva2VuKSB7XG4gICAgZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHVzZXJkYXRhXG4gICAgICAucmVtb3ZlX2Zyb21fY29sbGVjdGlvbihcImFjY2Vzc190b2tlbnNcIiwgdG9rZW5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGVycm9yX21lc3NhZ2UgPSBudWxsO1xuICAgICAgICBlLnRhcmdldC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IGZldGNoX3Rva2VucygpKVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGUudGFyZ2V0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIGVycm9yX21lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgY29uc29sZS53YXJuKFwiV3JpdGluZyBmYWlsZWRcIiwgZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkX2RlbW8oZSkge1xuICAgIGlmICghdXNlcmRhdGEgfHwgIXVzZXJkYXRhLnVzZXIpIHJldHVybjtcbiAgICBlLnRhcmdldC5kaXNhYmxlZCA9IHRydWU7XG4gICAgY29uc3QgcmVmID0gdXNlcmRiLmRiKClcbiAgICAgIC5jb2xsZWN0aW9uKFwiYWNjZXNzX3Rva2Vuc1wiKVxuICAgICAgLmRvYyh1c2VyZGF0YS51c2VyLnVpZCArIFwiX1wiICsgXCJkdW1teVwiKTtcbiAgICByZWZcbiAgICAgIC5kZWxldGUoKVxuICAgICAgLmNhdGNoKF8gPT4ge30pXG4gICAgICAudGhlbigoKSA9PlxuICAgICAgICByZWYuc2V0KHtcbiAgICAgICAgICB1aWQ6IHVzZXJkYXRhLnVzZXIudWlkLFxuICAgICAgICAgIHRva2VuOiBcImFiY2RlZmdoaVwiLFxuICAgICAgICAgIGNsaWVudF9uYW1lOiBcIkNMSVwiLFxuICAgICAgICAgIGNsaWVudF9pZDogXCJvaHhcIixcbiAgICAgICAgICBzY29wZXM6IFtcImNsb3VkX2Nvbm5lY3RvclwiLCBcImFkZG9uX3JlZ2lzdHJ5XCJdLFxuICAgICAgICAgIGlzc3VlZF9hdDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBlLnRhcmdldC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBmZXRjaF90b2tlbnMoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgZS50YXJnZXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZXJyb3JfbWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICBjb25zb2xlLndhcm4oXCJXcml0aW5nIGZhaWxlZFwiLCBlcnIpO1xuICAgICAgfSk7XG4gIH1cbjwvc2NyaXB0PlxuXG48c3R5bGU+XG4gIC5jYXJkOmhvdmVyIHtcbiAgICBib3gtc2hhZG93OiAwIDFweCAzcHggMXB4IHJnYmEoNjAsIDY0LCA2NywgMC4yKSxcbiAgICAgIDAgMnB4IDhweCA0cHggcmdiYSg2MCwgNjQsIDY3LCAwLjEpO1xuICB9XG4gIC5jYXJkLWJvZHkge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gIH1cbiAgLmNhcmQtYm9keSA+IGRpdjpmaXJzdC1jaGlsZCB7XG4gICAgZmxleDogMTtcbiAgfVxuPC9zdHlsZT5cblxueyNlYWNoIE9iamVjdC5lbnRyaWVzKGFjY2Vzc190b2tlbnMpIGFzIHRva2VufVxuICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxoND57dG9rZW5bMV0uY2xpZW50X25hbWV9PC9oND5cbiAgICAgICAgPHA+XG4gICAgICAgICAgQ2xpZW50OiB7dG9rZW5bMV0uY2xpZW50X2lkfVxuICAgICAgICAgIDxiciAvPlxuICAgICAgICAgIFNjb3Blczoge3Rva2VuWzFdLnNjb3Blcy5qb2luKCcsICcpfVxuICAgICAgICAgIDxiciAvPlxuICAgICAgICAgIElzc3VlZCBhdDoge25ldyBEYXRlKHBhcnNlSW50KHRva2VuWzFdLmlzc3VlZF9hdCkpLnRvTG9jYWxlU3RyaW5nKCl9XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm1yLTNcIiBzdHlsZT1cIm1heC13aWR0aDo0MDBweFwiPlxuICAgICAgICA8cCBjbGFzcz1cInNtYWxsXCI+XG4gICAgICAgICAgSXQgdGFrZXMgdXAgdG8gNjAgbWludXRlcyBmb3IgYSByZXZvY2F0aW9uIHRvIHRha2UgYWZmZWN0LlxuICAgICAgICA8L3A+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCJcbiAgICAgICAgICBvbjpjbGljaz17ZSA9PiByZXZva2UoZSwgdG9rZW5bMF0sIHRva2VuWzFdKX0+XG4gICAgICAgICAgUmV2b2tlXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuezplbHNlfVxuICA8cD5ObyBBY2Nlc3MgVG9rZW5zIHJlZ2lzdGVyZWQhPC9wPlxuey9lYWNofVxuXG57I2lmIHVzZXIgJiYgdXNlci5pc19hZG1pbn1cbiAgPGRpdiBjbGFzcz1cIm10LTRcIj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgb246Y2xpY2s9e2FkZF9kZW1vfT5cbiAgICAgIEFkZCBEZW1vIEFjY2VzcyBUb2tlblxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cbnsvaWZ9XG5cbnsjaWYgZXJyb3JfbWVzc2FnZX1cbiAgPHA+e2Vycm9yX21lc3NhZ2V9PC9wPlxuey9pZn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtRkUsbUJBQUssTUFBTSxBQUFDLENBQUMsQUFDWCxVQUFVLENBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7TUFDOUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEFBQ3ZDLENBQUMsQUFDRCxVQUFVLGNBQUMsQ0FBQyxBQUNWLE9BQU8sQ0FBRSxJQUFJLEFBQ2YsQ0FBQyxBQUNELHdCQUFVLENBQUcsaUJBQUcsWUFBWSxBQUFDLENBQUMsQUFDNUIsSUFBSSxDQUFFLENBQUMsQUFDVCxDQUFDIn0= */",I(document.head,e)),Y(this,t,j,J,o,[])}}window.customElements.define("ui-accesstokens",class extends HTMLElement{constructor(){super()}connectedCallback(){this.cmp=new S({target:this,props:{}})}disconnectedCallback(){this.cmp&&this.cmp.$destroy()}});
//# sourceMappingURL=ui-accesstokens.js.map
