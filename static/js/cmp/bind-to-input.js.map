{"version":3,"file":"bind-to-input.js","sources":["../../../assets/js/bind-to-input/index.js"],"sourcesContent":["\nwindow.customElements.define('bind-input', class extends HTMLElement {\n    constructor() {\n        super();\n        this.binder = {};\n    }\n\n    async connectedCallback() {\n        this.inputid = this.getAttribute(\"inputid\");\n        this.input = document.getElementById(this.inputid);\n        this.targetid = this.getAttribute(\"targetid\");\n        this.target = document.getElementById(this.targetid);\n\n        const props = this.hasAttribute(\"props\") ? this.getAttribute(\"props\").split(\",\") : [];\n        for (const prop of props) {\n            const [src, dest] = prop.split(\":\");\n            if (this.input[src] === undefined) {\n                console.warn(\"Source does not have property with name\", src, this.input);\n                continue;\n            }\n            this.target[dest] = this.input[src];\n        }\n\n        const events = this.getAttribute(\"events\").split(\",\");\n        for (const event of events) {\n            const [eventname, bindkey, use_detail] = event.split(\":\");\n            const t = this.target[bindkey];\n            if (t === undefined) {\n                console.warn(\"Target does not have property with name\", bindkey, t);\n                continue;\n            }\n            this.binder[event] = (e) => {\n                // if a custom event -> set the property of the target to the event \"detail\"\n                let value = e.target.value;\n\n                if (use_detail !== undefined) {\n                    value = e.detail;\n                } else if (e.target.type === \"radio\" || e.target.type === \"checkbox\") {\n                    value = e.target.checked;\n                }\n                if (typeof t === \"function\")\n                    t(value);\n                else\n                    this.target[bindkey] = value;\n            }\n            this.input.addEventListener(eventname, this.binder[event]);\n        }\n    }\n    disconnectedCallback() {\n        for (const event of Object.keys(this.binder)) {\n            const [eventname, bindkey] = event.split(\":\");\n            this.input.removeEventListener(eventname, this.binder[event]);\n        }\n        this.binder = {};\n    }\n});\n"],"names":[],"mappings":"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"}