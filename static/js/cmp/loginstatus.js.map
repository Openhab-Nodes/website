{"version":3,"file":"loginstatus.js","sources":["../../../assets/js/loginstatus/index.js"],"sourcesContent":["\nwindow.customElements.define('ui-loginstatus', class extends HTMLElement {\n    constructor() {\n        super();\n        this.signoutCb = e => this.signout(e);\n        this.authCb = () => this.auth();\n        this.initCb = () => this.init();\n    }\n\n    init() {\n        var firebaseConfig = {\n            apiKey: \"AIzaSyDtVk7gzBYy4ub3B1JuB4xErb_CMcYXHtU\",\n            authDomain: \"openhabx.firebaseapp.com\",\n            databaseURL: \"https://openhabx.firebaseio.com\",\n            projectId: \"openhabx\",\n            storageBucket: \"openhabx.appspot.com\",\n            messagingSenderId: \"889637406242\",\n            appId: \"1:889637406242:web:68e31a7134337311\"\n        };\n\n        if (!window.firebase) {\n            return;\n        }\n\n        if (!window.firebase.apps.length) {\n            console.log(\"Start firebase\");\n            firebase.initializeApp(firebaseConfig);\n        }\n    }\n\n    auth() {\n        if (!window.firebase) {\n            document.getElementById('signed-temp').innerHTML = \"Connection Issue!\";\n            return;\n        }\n\n        firebase.auth().onAuthStateChanged(function (user) {\n            document.getElementById('signed-temp').classList.add(\"d-none\");\n            if (user) {\n                let el = document.getElementById('signed-in');\n                el.classList.remove(\"d-none\");\n                if (user.photoURL) el.querySelector(\".userimg\").src = user.photoURL;\n                if (user.displayName) el.querySelector(\".username\").innerHTML = user.displayName;\n                else if (user.email) el.querySelector(\".username\").innerHTML = user.email;\n                document.getElementById('signed-out').classList.add(\"d-none\");\n            } else {\n                document.getElementById('signed-in').classList.add(\"d-none\");\n                document.getElementById('signed-out').classList.remove(\"d-none\");\n            }\n        }, function (error) {\n            let btn = document.getElementById('signed-temp');\n            btn.innerHTML = \"Connection Issue!\";\n            btn.title = error;\n            return;\n            console.log(error);\n        });\n    }\n\n    signout(e) {\n        e.preventDefault();\n        firebase.auth().signOut();\n    }\n\n    connectedCallback() {\n        document.addEventListener(\"PreInit\", this.initCb);\n        document.addEventListener(\"MainContentChanged\", this.authCb);\n        document.getElementById(\"signout\").addEventListener(\"click\", this.signoutCb);\n    }\n    disconnectedCallback() {\n        document.removeEventListener(\"PreInit\", this.initCb);\n        document.removeEventListener(\"MainContentChanged\", this.authCb);\n        document.getElementById(\"signout\").addEventListener(\"click\", this.signoutCb);\n    }\n});\n"],"names":[],"mappings":"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"}