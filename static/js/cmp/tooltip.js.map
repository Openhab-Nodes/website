{"version":3,"file":"tooltip.js","sources":["../../../assets/js/tooltip/popover_helper.js","../../../assets/js/tooltip/index.js"],"sourcesContent":["\nfunction isInViewport(element) {\n  const rect = element.getBoundingClientRect();\n  const html = document.documentElement;\n  return rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || html.clientHeight) &&\n    rect.right <= (window.innerWidth || html.clientWidth);\n}\n\nclass Popover {\n  constructor(trigger, popoverTemplate, { position = 'top', className = 'popover' }) {\n    this.trigger = trigger;\n    this.position = position;\n    this.className = className;\n    this.isTemplate = false;\n    this.orderedPositions = ['top', 'right', 'bottom', 'left'];\n\n    this.isTemplate = popoverTemplate.tagName.toUpperCase() == \"TEMPLATE\";\n    if (this.isTemplate) {\n      this.popover = document.createElement('div');\n      this.popover.innerHTML = popoverTemplate.innerHTML;\n    } else {\n      this.popover = popoverTemplate;\n    }\n    this.popover.style.zIndex = 100;\n\n    Object.assign(this.popover.style, {\n      position: 'fixed'\n    });\n\n    this.popover.classList.add(className);\n\n    this.handleWindowEvent = () => {\n      if (this.isVisible) {\n        this.reposition();\n      }\n    };\n\n    this.handleDocumentEvent = (evt) => {\n      if (this.isVisible && evt.target !== this.trigger && evt.target !== this.popover) {\n        this.destroy();\n      }\n    };\n  }\n\n  get isVisible() {\n    return this.isTemplate ? document.body.contains(this.popover) : this.popover.style.visibility !== \"hidden\";\n  }\n\n  show() {\n    if (this.isVisible) return;\n\n    document.addEventListener('click', this.handleDocumentEvent);\n    window.addEventListener('scroll', this.handleWindowEvent);\n    window.addEventListener('resize', this.handleWindowEvent);\n\n    if (this.isTemplate)\n      document.body.appendChild(this.popover);\n    else {\n      this.popover.style.setProperty('visibility', 'visible', 'important');\n    }\n\n    this.reposition();\n  }\n\n  reposition() {\n    const { top: triggerTop, left: triggerLeft } = this.trigger.getBoundingClientRect();\n    const { offsetHeight: triggerHeight, offsetWidth: triggerWidth } = this.trigger;\n    const { offsetHeight: popoverHeight, offsetWidth: popoverWidth } = this.popover;\n\n    const positionIndex = this.orderedPositions.indexOf(this.position);\n\n    const positions = {\n      top: {\n        name: 'top',\n        top: triggerTop - popoverHeight,\n        left: triggerLeft - ((popoverWidth - triggerWidth) / 2)\n      },\n      right: {\n        name: 'right',\n        top: triggerTop - ((popoverHeight - triggerHeight) / 2),\n        left: triggerLeft + triggerWidth\n      },\n      bottom: {\n        name: 'bottom',\n        top: triggerTop + triggerHeight,\n        left: triggerLeft - ((popoverWidth - triggerWidth) / 2)\n      },\n      left: {\n        name: 'left',\n        top: triggerTop - ((popoverHeight - triggerHeight) / 2),\n        left: triggerLeft - popoverWidth\n      }\n    };\n\n    const position = this.orderedPositions\n      .slice(positionIndex)\n      .concat(this.orderedPositions.slice(0, positionIndex))\n      .map(pos => positions[pos])\n      .find(pos => {\n        this.popover.style.top = `${pos.top}px`;\n        this.popover.style.left = `${pos.left}px`;\n        return isInViewport(this.popover);\n      });\n\n    this.orderedPositions.forEach(pos => {\n      this.popover.classList.remove(`${this.className}--${pos}`);\n    });\n\n    if (position) {\n      this.popover.classList.add(`${this.className}--${position.name}`);\n    } else {\n      this.popover.style.top = positions.bottom.top;\n      this.popover.style.left = positions.bottom.left;\n      this.popover.classList.add(`${this.className}--bottom`);\n    }\n  }\n\n  destroy() {\n    if (this.isTemplate)\n      this.popover.remove();\n    else\n      this.popover.style.setProperty('visibility', 'hidden', 'important');\n\n    document.removeEventListener('click', this.handleDocumentEvent);\n    window.removeEventListener('scroll', this.handleWindowEvent);\n    window.removeEventListener('resize', this.handleWindowEvent);\n  }\n\n  toggle() {\n    if (this.isVisible) {\n      this.destroy();\n    } else {\n      this.show();\n    }\n  }\n}\n\nexport { Popover };","import {Popover} from \"./popover_helper.js\";\n\nwindow.customElements.define('ui-tooltip', class extends HTMLElement {\n  constructor() {\n    super();\n    this.initCb = () => this.init();\n    this.clickCb = e => this.click(e);\n  }\n\n  init() {\n    const trigger = document.getElementById(this.getAttribute(\"target\"));\n    const popoverTemplate = document.querySelector(`[data-popover=${trigger.id}]`);\n\n    if (!trigger) {\n      console.warn(\"Tooltip did not find target: \", trigger);\n      return;\n    }\n    if (!popoverTemplate) {\n      console.warn(\"Did not find template for \", trigger.id);\n      return;\n    }\n    if (this.popover) this.popover.destroy();\n\n    this.popover = new Popover(trigger, popoverTemplate, { position: 'bottom' });\n    trigger.removeEventListener('click', this.clickCb);\n    trigger.addEventListener('click', this.clickCb);\n  }\n\n  click(e) {\n    e.preventDefault();\n    this.popover.toggle();\n  }\n\n  connectedCallback() {\n    document.addEventListener(\"MainContentChanged\", this.initCb);\n    this.init();\n  }\n  disconnectedCallback() {\n    if (this.popover) this.popover.destroy();\n    const trigger = document.getElementById(this.getAttribute(\"target\"));\n    if (trigger) trigger.removeEventListener('click', this.clickCb);\n\n    document.removeEventListener(\"MainContentChanged\", this.initCb);\n  }\n});\n"],"names":[],"mappings":"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"}