{"version":3,"file":"tooltip.js","sources":["../../../assets/js/tooltip/popover_helper.js","../../../assets/js/tooltip/index.js"],"sourcesContent":["\nfunction isInViewport(element) {\n  const rect = element.getBoundingClientRect();\n  const html = document.documentElement;\n  return rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || html.clientHeight) &&\n    rect.right <= (window.innerWidth || html.clientWidth);\n}\n\nclass Popover {\n  constructor(trigger, popoverTemplate, { position = 'top', className = 'popover' }, doc = document) {\n    this.trigger = trigger;\n    this.position = position;\n    this.className = className;\n    this.orderedPositions = ['top', 'right', 'bottom', 'left'];\n    this.popover = popoverTemplate;\n\n    this.handleWindowEvent = () => {\n      if (this.isVisible) {\n        this.reposition();\n      }\n    };\n\n    this.handleDocumentEvent = (evt) => {\n      if (this.isVisible && evt.target !== this.trigger && evt.target !== this.popover) {\n        this.destroy();\n      }\n    };\n  }\n\n  get isVisible() {\n    return this.popover.classList.contains(this.className);\n  }\n\n  show() {\n    if (this.isVisible) return;\n\n    document.addEventListener('click', this.handleDocumentEvent);\n    window.addEventListener('scroll', this.handleWindowEvent);\n    window.addEventListener('resize', this.handleWindowEvent);\n    this.reposition();\n  }\n\n  reposition() {\n    const { top: triggerTop, left: triggerLeft } = this.trigger.getBoundingClientRect();\n    const { offsetHeight: triggerHeight, offsetWidth: triggerWidth } = this.trigger;\n    const { offsetHeight: popoverHeight, offsetWidth: popoverWidth } = this.popover;\n\n    const positionIndex = this.orderedPositions.indexOf(this.position);\n\n    const positions = {\n      top: {\n        name: 'top',\n        top: triggerTop - popoverHeight,\n        left: triggerLeft - ((popoverWidth - triggerWidth) / 2)\n      },\n      right: {\n        name: 'right',\n        top: triggerTop - ((popoverHeight - triggerHeight) / 2),\n        left: triggerLeft + triggerWidth\n      },\n      bottom: {\n        name: 'bottom',\n        top: triggerTop + triggerHeight,\n        left: triggerLeft - ((popoverWidth - triggerWidth) / 2)\n      },\n      left: {\n        name: 'left',\n        top: triggerTop - ((popoverHeight - triggerHeight) / 2),\n        left: triggerLeft - popoverWidth\n      }\n    };\n\n    const position = this.orderedPositions\n      .slice(positionIndex)\n      .concat(this.orderedPositions.slice(0, positionIndex))\n      .map(pos => positions[pos])\n      .find(pos => {\n        this.popover.style.top = `${pos.top}px`;\n        this.popover.style.left = `${pos.left}px`;\n        return isInViewport(this.popover);\n      });\n\n    this.orderedPositions.forEach(pos => {\n      this.popover.classList.remove(`${this.className}--${pos}`);\n    });\n\n    if (position) {\n      this.popover.classList.add(`${this.className}--${position.name}`);\n    } else {\n      this.popover.style.top = positions.bottom.top;\n      this.popover.style.left = positions.bottom.left;\n      this.popover.classList.add(`${this.className}--bottom`);\n    }\n    this.popover.classList.add(this.className);\n  }\n\n  destroy() {\n    this.orderedPositions.forEach(pos => {\n      this.popover.classList.remove(`${this.className}--${pos}`);\n    });\n    this.popover.classList.remove(`${this.className}`);\n\n    document.removeEventListener('click', this.handleDocumentEvent);\n    window.removeEventListener('scroll', this.handleWindowEvent);\n    window.removeEventListener('resize', this.handleWindowEvent);\n  }\n\n  toggle() {\n    if (this.isVisible) {\n      this.destroy();\n    } else {\n      this.show();\n    }\n  }\n}\n\nexport { Popover };","import { Popover } from \"./popover_helper.js\";\n\n/**\n * Usage:\n * \n * With external button:\n * <button id=\"mybutton\" class=\"contexthelp\">Click here</button>\n * <ui-tooltip target=\"mybutton\">\n *   <div>Some content</div>\n * </ui-tooltip>\n * \n * With inline button\n * <ui-tooltip>\n *   <button class=\"btn-link contexthelp\" title=\"Context help\" slot=\"button\">Click here</button>\n *   <div>Some content</div>\n * </ui-tooltip>\n */\nwindow.customElements.define('ui-tooltip', class extends HTMLElement {\n  constructor() {\n    super();\n    this.clickCb = e => this.click(e);\n    this.attachShadow({mode: 'open'}).innerHTML=\"<link rel='stylesheet' href='/css/main.min.css'><div style='position:fixed;visibility:hidden;z-index:100' id='main'><slot></slot></div><slot name='button'></slot>\";\n  }\n\n  click(e) {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      }\n    this.popover.toggle();\n  }\n\n  connectedCallback() {\n    window.requestAnimationFrame(()=> this.connectedCallbackDelayed());\n  }\n\n  connectedCallbackDelayed() {\n    const defaultSlot = this.shadowRoot.querySelector('#main');\n    if (this.hasAttribute(\"maxwidth\")) defaultSlot.style.maxWidth= \"500px\";\n\n    let trigger = this.hasAttribute(\"target\")? document.getElementById(this.getAttribute(\"target\")):null;\n\n    if (this.popover) this.popover.destroy();\n\n    this.popover = new Popover(trigger||this, defaultSlot, { position: 'bottom' });\n    if (!trigger) trigger = this.shadowRoot.querySelector('slot[name=\"button\"]');\n    if (trigger) {\n      trigger.removeEventListener('click', this.clickCb);\n      trigger.addEventListener('click', this.clickCb);\n    }\n  }\n  disconnectedCallback() {\n    if (this.popover) this.popover.destroy();\n    delete this.popover;\n    const trigger = document.getElementById(this.getAttribute(\"target\"));\n    if (trigger) trigger.removeEventListener('click', this.clickCb);\n  }\n});\n"],"names":[],"mappings":"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"}